<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EdilPavia · Richiedi preventivo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Stili identici alle altre pagine (header, footer, ecc.) */
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Segoe UI',Roboto,sans-serif; background:#f9fafc; color:#1e2b37; line-height:1.5; }
        .container { max-width:1280px; margin:0 auto; padding:0 20px; }
        header { background:#fff; box-shadow:0 4px 12px rgba(0,0,0,0.02); padding:16px 0; position:sticky; top:0; z-index:10; }
        .header-inner { display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:16px; }
        .logo { display:flex; align-items:center; gap:8px; font-size:1.8rem; font-weight:600; color:#0b3b5c; }
        .logo i { color:#f5a623; font-size:2.2rem; }
        .nav-links { display:flex; gap:32px; font-weight:500; color:#2c3e50; }
        .nav-links a:hover { color:#0b3b5c; border-bottom:2px solid #f5a623; }
        .btn-registrati { background:#0b3b5c; color:#fff !important; padding:10px 22px; border-radius:40px; font-weight:600; display:inline-flex; align-items:center; gap:8px; transition:background 0.2s; }
        .btn-registrati:hover { background:#124f73; }
        footer { background:#102a37; color:#d0dee9; padding:48px 0 24px; border-radius:40px 40px 0 0; margin-top:60px; }
        .footer-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr)); gap:40px; margin-bottom:40px; }
        .footer-col h4 { color:#fff; font-size:1.2rem; margin-bottom:20px; }
        .footer-col p, .footer-col a { color:#b0c4d9; line-height:2; }
        .footer-col i { width:24px; color:#f5a623; }
        .social-icons { display:flex; gap:18px; margin-top:16px; }
        .social-icons a { background:#1f4055; width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:0.2s; }
        .social-icons a:hover { background:#f5a623; color:#0b3b5c; }
        .copyright { text-align:center; padding-top:32px; border-top:1px solid #2a4a5e; font-size:0.9rem; }

        /* Stili specifici per la pagina preventivo */
        .preventivo-page { padding:60px 0; }
        .preventivo-card { background:white; border-radius:40px; padding:48px; max-width:700px; margin:0 auto; box-shadow:0 20px 40px rgba(0,0,0,0.03); border:1px solid #eef2f6; }
        .preventivo-title { font-size:2.5rem; color:#0b3b5c; text-align:center; margin-bottom:20px; }
        .form-group { margin-bottom:20px; }
        label { display:block; margin-bottom:8px; font-weight:600; color:#0b3b5c; }
        input, textarea, select { width:100%; padding:12px 16px; border:1px solid #d0ddee; border-radius:30px; font-size:1rem; background:white; }
        .btn-submit { background:#f5a623; color:#0b3b5c; border:none; padding:12px 30px; border-radius:60px; font-weight:700; cursor:pointer; transition:0.2s; width:100%; }
        .btn-submit:hover { background:#e09112; }
        .alert { padding:15px; border-radius:30px; margin-bottom:20px; }
        .alert-success { background:#d4edda; color:#155724; border:1px solid #c3e6cb; }
    </style>
</head>
<body>
    <header>
        <div class="container header-inner">
            <a href="index.html" class="logo"><i class="fas fa-helmet-safety"></i><span>EdilPavia</span></a>
            <nav class="nav-links">
                <a href="index.html">Home</a>
                <a href="servizi.html">Servizi</a>
                <a href="preventivo.html">Preventivo</a>
                <a href="contatti.html">Contatti</a>
                <a href="registrazione.html">Accedi</a>
            </nav>
            <a href="registrazione.html" class="btn-registrati"><i class="fas fa-user-plus"></i> Registrati</a>
        </div>
    </header>

    <main class="preventivo-page">
        <div class="container">
            <div class="preventivo-card">
                <h1 class="preventivo-title">Richiedi un preventivo</h1>
                <p class="text-center mb-4">Compila il form e ti risponderemo al più presto.</p>
                <form id="formPreventivoGenerale">
                    <div class="form-group">
                        <label>Servizio di interesse</label>
                        <select name="servizio" id="servizioSelect" required>
                            <option value="">Seleziona un servizio</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nome e Cognome</label>
                        <input type="text" name="nome" placeholder="Mario Rossi" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" placeholder="mario@example.com" required>
                    </div>
                    <div class="form-group">
                        <label>Telefono</label>
                        <input type="tel" name="telefono" placeholder="333 1234567">
                    </div>
                    <div class="form-group">
                        <label>Messaggio (opzionale)</label>
                        <textarea name="messaggio" rows="4" placeholder="Descrivi brevemente le tue esigenze..."></textarea>
                    </div>
                    <button type="submit" class="btn-submit">Invia richiesta</button>
                    <div id="formFeedback" class="mt-3"></div>
                </form>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col"><h4>EdilPavia</h4><p><i class="fas fa-location-dot"></i> Via Roma 1, 27100 Pavia</p><p><i class="fas fa-phone"></i> 0382 123456</p><p><i class="fas fa-envelope"></i> info@edilpavia.it</p></div>
                <div class="footer-col"><h4>Servizi</h4><p><a href="servizi.html">Edili</a></p><p><a href="servizi.html">Idraulica</a></p><p><a href="servizi.html">Elettricista</a></p><p><a href="servizi.html">Giardinaggio</a></p><p><a href="servizi.html">Antifurti</a></p></div>
                <div class="footer-col"><h4>Provincia di Pavia</h4><p>Operiamo a Pavia città e in tutti i comuni: Vigevano, Voghera, Mortara, Stradella, Broni, Casteggio, Garlasco.</p></div>
                <div class="footer-col"><h4>Seguici</h4><div class="social-icons"><a href="#"><i class="fab fa-facebook-f"></i></a><a href="#"><i class="fab fa-instagram"></i></a><a href="#"><i class="fab fa-whatsapp"></i></a></div><p style="margin-top:20px;"><i class="fas fa-star" style="color:#f5a623;"></i> Pagamenti sicuri</p></div>
            </div>
            <div class="copyright">&copy; 2025 EdilPavia · Tutti i diritti riservati · <a href="#" style="color:#b0c4d9;">Privacy</a> · <a href="#" style="color:#b0c4d9;">Cookie</a></div>
        </div>
    </footer>

    <script src="js/servizi-data.js"></script>
    <script src="js/richieste-data.js"></script>
    <script>
        const select = document.getElementById('servizioSelect');
        const form = document.getElementById('formPreventivoGenerale');
        const feedback = document.getElementById('formFeedback');

        function popolaServizi() {
            const servizi = getServizi();
            servizi.forEach(s => {
                const option = document.createElement('option');
                option.value = s.titolo || s.title;
                option.textContent = s.titolo || s.title;
                select.appendChild(option);
            });
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(form);
            const richiesta = {
                servizio: formData.get('servizio'),
                nome: formData.get('nome'),
                email: formData.get('email'),
                telefono: formData.get('telefono'),
                messaggio: formData.get('messaggio')
            };
            aggiungiRichiesta(richiesta);
            feedback.innerHTML = '<div class="alert alert-success">Richiesta inviata con successo! Ti contatteremo presto.</div>';
            form.reset();
        });

        document.addEventListener('DOMContentLoaded', popolaServizi);
    </script>
</body>
</html>
